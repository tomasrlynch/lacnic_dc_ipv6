name: dci_rs

mgmt:
  network: netlab_mgmt
  ipv4-subnet: 192.168.121.0/24
  # Note: 'start' not validated
topology:
  nodes:
    leaf1:
      mgmt-ipv4: 192.168.121.101
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: leaf,as4220010001
      binds:
      - clab_files/leaf1/daemons:/etc/frr/daemons
      - clab_files/leaf1/hosts:/etc/hosts
    leaf2:
      mgmt-ipv4: 192.168.121.102
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: leaf,as4220020002
      binds:
      - clab_files/leaf2/daemons:/etc/frr/daemons
      - clab_files/leaf2/hosts:/etc/hosts
    leaf3:
      mgmt-ipv4: 192.168.121.103
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: leaf,as4220030003
      binds:
      - clab_files/leaf3/daemons:/etc/frr/daemons
      - clab_files/leaf3/hosts:/etc/hosts
    spine1:
      mgmt-ipv4: 192.168.121.104
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: spines,as4210010001
      binds:
      - clab_files/spine1/daemons:/etc/frr/daemons
      - clab_files/spine1/hosts:/etc/hosts
    spine2:
      mgmt-ipv4: 192.168.121.105
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: routeserver,as4210020002
      binds:
      - clab_files/spine2/daemons:/etc/frr/daemons
      - clab_files/spine2/hosts:/etc/hosts
    spine3:
      mgmt-ipv4: 192.168.121.106
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: spines,as4210030003
      binds:
      - clab_files/spine3/daemons:/etc/frr/daemons
      - clab_files/spine3/hosts:/etc/hosts
    borde1:
      mgmt-ipv4: 192.168.121.107
      kind: linux
      image: ghcr.io/sysoleg/vyos-container
      runtime: docker
      group: borde,as65000
      binds:
      - /lib/modules:/lib/modules
    borde2:
      mgmt-ipv4: 192.168.121.108
      kind: linux
      image: ghcr.io/sysoleg/vyos-container
      runtime: docker
      group: borde,as65000
      binds:
      - /lib/modules:/lib/modules
    borde3:
      mgmt-ipv4: 192.168.121.109
      kind: linux
      image: ghcr.io/sysoleg/vyos-container
      runtime: docker
      group: borde,as65000
      binds:
      - /lib/modules:/lib/modules
    host1:
      mgmt-ipv4: 192.168.121.111
      kind: linux
      image: python:3.9-alpine
      runtime: docker
      group: hosts
      binds:
      - clab_files/host1/hosts:/etc/hosts
    host2:
      mgmt-ipv4: 192.168.121.112
      kind: linux
      image: python:3.9-alpine
      runtime: docker
      group: hosts
      binds:
      - clab_files/host2/hosts:/etc/hosts
    host3:
      mgmt-ipv4: 192.168.121.113
      kind: linux
      image: python:3.9-alpine
      runtime: docker
      group: hosts
      binds:
      - clab_files/host3/hosts:/etc/hosts


  links:
  - endpoints:
    - "leaf1:eth1"
    - "spine1:eth1"
  - endpoints:
    - "leaf2:eth1"
    - "spine2:eth1"
  - endpoints:
    - "leaf3:eth1"
    - "spine3:eth1"
  - endpoints:
    - "leaf1:eth2"
    - "host1:eth1"
  - endpoints:
    - "leaf2:eth2"
    - "host2:eth1"
  - endpoints:
    - "leaf3:eth2"
    - "host3:eth1"
  - endpoints:
    - "spine1:eth2"
    - "borde1:eth1"
  - endpoints:
    - "spine2:eth2"
    - "borde2:eth1"
  - endpoints:
    - "spine3:eth2"
    - "borde3:eth1"
  - endpoints:
    - "borde1:eth2"
    - "borde2:eth2"
  - endpoints:
    - "borde1:eth3"
    - "borde3:eth2"
  - endpoints:
    - "borde2:eth3"
    - "borde3:eth3"
