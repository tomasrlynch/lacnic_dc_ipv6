name: dci

mgmt:
  network: netlab_mgmt
  ipv4-subnet: 192.168.121.0/24
  # Note: 'start' not validated
topology:
  nodes:
    host1a:
      mgmt-ipv4: 192.168.121.126
      kind: linux
      image: python:3.9-alpine
      runtime: docker
      group: hosts
      binds:
      - clab_files/host1a/hosts:/etc/hosts
    host2a:
      mgmt-ipv4: 192.168.121.142
      kind: linux
      image: python:3.9-alpine
      runtime: docker
      group: hosts
      binds:
      - clab_files/host2a/hosts:/etc/hosts
    host1b:
      mgmt-ipv4: 192.168.121.127
      kind: linux
      image: python:3.9-alpine
      runtime: docker
      group: hosts
      binds:
      - clab_files/host1b/hosts:/etc/hosts
    host2b:
      mgmt-ipv4: 192.168.121.143
      kind: linux
      image: python:3.9-alpine
      runtime: docker
      group: hosts
      binds:
      - clab_files/host2b/hosts:/etc/hosts
    leaf1a:
      mgmt-ipv4: 192.168.121.101
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: leaf,as4220010001
      binds:
      - clab_files/leaf1a/daemons:/etc/frr/daemons
      - clab_files/leaf1a/hosts:/etc/hosts
    leaf2a:
      mgmt-ipv4: 192.168.121.102
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: leaf,as4220010002
      binds:
      - clab_files/leaf2a/daemons:/etc/frr/daemons
      - clab_files/leaf2a/hosts:/etc/hosts
    leaf1b:
      mgmt-ipv4: 192.168.121.103
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: leaf,as4220020001
      binds:
      - clab_files/leaf1b/daemons:/etc/frr/daemons
      - clab_files/leaf1b/hosts:/etc/hosts
    leaf2b:
      mgmt-ipv4: 192.168.121.104
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: leaf,as4220020002
      binds:
      - clab_files/leaf2b/daemons:/etc/frr/daemons
      - clab_files/leaf2b/hosts:/etc/hosts
    spine1a:
      mgmt-ipv4: 192.168.121.105
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: spine_a,as4210010001
      binds:
      - clab_files/spine1a/daemons:/etc/frr/daemons
      - clab_files/spine1a/hosts:/etc/hosts
    spine2a:
      mgmt-ipv4: 192.168.121.106
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: spine_a,as4210010001
      binds:
      - clab_files/spine2a/daemons:/etc/frr/daemons
      - clab_files/spine2a/hosts:/etc/hosts
    spine1b:
      mgmt-ipv4: 192.168.121.107
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: spine_b,as4210020001
      binds:
      - clab_files/spine1b/daemons:/etc/frr/daemons
      - clab_files/spine1b/hosts:/etc/hosts
    spine2b:
      mgmt-ipv4: 192.168.121.108
      kind: linux
      image: quay.io/frrouting/frr:9.1.0
      runtime: docker
      group: spine_b,as4210020001
      binds:
      - clab_files/spine2b/daemons:/etc/frr/daemons
      - clab_files/spine2b/hosts:/etc/hosts
    borde1a:
      mgmt-ipv4: 192.168.121.110
      kind: linux
      image: ghcr.io/sysoleg/vyos-container
      runtime: docker
      group: borde,as64501
      binds:
      - /lib/modules:/lib/modules
    borde1b:
      mgmt-ipv4: 192.168.121.120
      kind: linux
      image: ghcr.io/sysoleg/vyos-container
      runtime: docker
      group: borde,as64502
      binds:
      - /lib/modules:/lib/modules
    transito:
      mgmt-ipv4: 192.168.121.109
      kind: linux
      image: ghcr.io/sysoleg/vyos-container
      runtime: docker
      group: as64500
      binds:
      - /lib/modules:/lib/modules


  links:
  - endpoints:
    - "leaf1a:eth1"
    - "spine1a:eth1"
  - endpoints:
    - "leaf2a:eth1"
    - "spine1a:eth2"
  - endpoints:
    - "leaf1a:eth2"
    - "spine2a:eth1"
  - endpoints:
    - "leaf2a:eth2"
    - "spine2a:eth2"
  - endpoints:
    - "leaf1b:eth1"
    - "spine1b:eth1"
  - endpoints:
    - "leaf2b:eth1"
    - "spine1b:eth2"
  - endpoints:
    - "leaf1b:eth2"
    - "spine2b:eth1"
  - endpoints:
    - "leaf2b:eth2"
    - "spine2b:eth2"
  - endpoints:
    - "host1a:eth1"
    - "leaf1a:eth3"
  - endpoints:
    - "host2a:eth1"
    - "leaf2a:eth3"
  - endpoints:
    - "host1b:eth1"
    - "leaf1b:eth3"
  - endpoints:
    - "host2b:eth1"
    - "leaf2b:eth3"
  - endpoints:
    - "spine1a:eth3"
    - "borde1a:eth1"
  - endpoints:
    - "spine2a:eth3"
    - "borde1a:eth2"
  - endpoints:
    - "spine1b:eth3"
    - "borde1b:eth1"
  - endpoints:
    - "spine2b:eth3"
    - "borde1b:eth2"
  - endpoints:
    - "borde1a:eth3"
    - "transito:eth1"
  - endpoints:
    - "borde1b:eth3"
    - "transito:eth2"
